(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{269:function(e,t){},271:function(e,t){},285:function(e,t){},287:function(e,t){},315:function(e,t){},317:function(e,t){},318:function(e,t){},323:function(e,t){},325:function(e,t){},331:function(e,t){},333:function(e,t){},352:function(e,t){},364:function(e,t){},367:function(e,t){},384:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(44),r=n.n(o),s=n(428),i=n(222),l=n(62),u=n(417),j=Object(i.a)({palette:{primary:{main:l.a[500],light:l.a[300],dark:l.a[700]},secondary:{main:u.a[700],light:u.a[500]}}}),d=n(30),b=n(22),O=n(435),f=n(6),m=n(15),x=n(430),h=n(431),p=n(429),g=n(433),v=n(434),S=n(218),T=n.n(S),w=n(101),E=n.n(w),P=function(e){if("undefined"!==typeof window)return E.a.get(e)},R=function(e,t){var n,a;console.log("AUTHENTICATE HELPER ON SIGNIN RESPONSE",e),n="token",a=e.data.token,"undefined"!==typeof window&&E.a.set(n,a,{expires:1}),function(e,t){"undefined"!==typeof window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},y=function(){if("undefined"!==typeof window&&P("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},k=function(e){var t;t="token","undefined"!==typeof window&&E.a.remove(t,{expires:1}),function(e){"undefined"!==typeof window&&localStorage.removeItem(e)}("user"),e()},C=function(e,t){if(console.log("UPDATE USER IN LOCALSTORAGE HELPERS",e),"undefined"!==typeof window){var n=JSON.parse(localStorage.getItem("user"));n=e.data,localStorage.setItem("user",JSON.stringify(n))}t()},N=n(1);function I(e){var t=e.history,n=Object(a.useState)({mobileView:!1,drawerOpen:!1}),c=Object(m.a)(n,2),o=c[0],r=c[1],s=Object(a.useState)([]),i=Object(m.a)(s,2),l=i[0],u=i[1],j=o.mobileView,b=o.drawerOpen;Object(a.useEffect)((function(){u(function(e){var t=[];return y()||(t.push({label:"Sign in",href:"/signin"}),t.push({label:"Sign up",href:"/signup"})),y()&&"admin"===y().role&&t.push({label:"Courses",href:"/admin"}),y()&&t.push({label:"My Account",href:"/my-account"}),y()&&t.push({label:"Log out",href:"",callback:function(){k((function(){e.push("/")}))}}),t}(t));var e=function(){return window.innerWidth<900?r((function(e){return Object(f.a)(Object(f.a)({},e),{},{mobileView:!0})})):r((function(e){return Object(f.a)(Object(f.a)({},e),{},{mobileView:!1})}))};return e(),window.addEventListener("resize",(function(){return e()})),function(){window.removeEventListener("resize",(function(){return e()}))}}),[]);var S=Object(N.jsx)(d.b,{to:"/",children:Object(N.jsx)("img",{height:"30",src:"/img/logo.svg",style:{marginTop:"8px"}})}),w=function(){return l.map((function(e){var t=e.label,n=e.href,a=e.callback;return void 0!==a?Object(N.jsx)(g.a,{onClick:function(){a()},sx:{textTransform:"none"},children:t},t):Object(N.jsx)(g.a,{color:"inherit",to:n,component:d.b,sx:{textTransform:"none"},children:t},t)}))},E=function(){if(l)return l.map((function(e){var t=e.label,n=e.href,a=e.callback;return void 0!==a?Object(N.jsx)(g.a,{onClick:function(){a()},sx:{textTransform:"none"},children:t},t):Object(N.jsx)(g.a,{component:d.b,to:n,sx:{textTransform:"none"},children:t},t)}))};return Object(N.jsx)(v.a,{sx:{backgroundColor:"#fff",boxShadow:"none"},children:Object(N.jsx)(O.a,{children:j?Object(N.jsxs)(x.a,{disableGutters:!0,children:[Object(N.jsx)(h.a,{edge:"start",color:"inherit","aria-label":"menu","aria-haspopup":"true",onClick:function(){return r((function(e){return Object(f.a)(Object(f.a)({},e),{},{drawerOpen:!0})}))},children:Object(N.jsx)(T.a,{})}),Object(N.jsx)(p.a,{anchor:"left",open:b,onClose:function(){return r((function(e){return Object(f.a)(Object(f.a)({},e),{},{drawerOpen:!1})}))},children:Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:"250px",padding:"20px"},children:[S,E()]})}),Object(N.jsx)("div",{children:S})]}):Object(N.jsxs)(x.a,{disableGutters:!0,sx:{display:"flex",justifyContent:"space-between"},children:[S,Object(N.jsx)("div",{children:w()})]})})})}var A=Object(b.h)((function(e){var t=e.children,n=(e.match,e.history);return Object(N.jsxs)(a.Fragment,{children:[Object(N.jsx)(I,{history:n}),Object(N.jsx)(O.a,{sx:{paddingTop:"64px"},children:t})]})})),D=function(){return Object(N.jsxs)(A,{children:[Object(N.jsx)("h1",{children:"Welcome to DevsLearning!"}),Object(N.jsx)("p",{children:"Courses directory for developers."})]})},L=n(3),U=n(23),F=n.n(U),G=n(18),V=(n(108),n(424)),B=function(){var e=Object(a.useState)({name:"",email:"",password:"",buttonText:"Submit"}),t=Object(m.a)(e,2),n=t[0],c=t[1],o=n.name,r=n.email,s=n.password,i=n.buttonText,l=function(e){return function(t){c(Object(f.a)(Object(f.a)({},n),{},Object(L.a)({},e,t.currentTarget.value)))}},u=function(e){e.preventDefault(),c(Object(f.a)(Object(f.a)({},n),{},{buttonText:"Submitting"})),F()({method:"POST",url:"".concat("/api","/signup"),data:{name:o,email:r,password:s}}).then((function(e){console.log("Signup success",e),c(Object(f.a)(Object(f.a)({},n),{},{name:"",email:"",password:"",buttonText:"Submitted"})),G.b.success(e.data.message)})).catch((function(e){console.log("Signup error",e.response.data),c(Object(f.a)(Object(f.a)({},n),{},{buttonText:"Submit"})),G.b.error(e.response.data.error)}))};return Object(N.jsx)(A,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)(G.a,{}),y()?Object(N.jsx)(b.a,{to:"/"}):null,Object(N.jsx)("h1",{children:"Signup"}),Object(N.jsxs)("form",{children:[Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:l("name"),type:"text",value:o,label:"Name",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:l("email"),type:"email",value:r,label:"E-mail",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:l("password"),type:"password",value:s,label:"Password",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{onClick:u,variant:"contained",sx:{marginTop:"20px"},children:i})})]})]})})},W=n(220),z=n.n(W),J=function(e){var t=e.informParent,n=function(e){(function(e){return!!e&&"object"===typeof e&&!!e.tokenId})(e)&&(console.log(e.tokenId),F()({method:"POST",url:"".concat("/api","/google-login"),data:{idToken:e.tokenId}}).then((function(e){console.log("GOOGLE SIGNIN SUCCESS",e),t(e)})).catch((function(e){console.log("GOOGLE SIGNIN ERROR",e.response)})))};return Object(N.jsx)("div",{className:"pb-3",children:Object(N.jsx)(z.a,{clientId:"".concat("90371965786-220jnsr1qm8i0angk5m747f5qgvcu8fa.apps.googleusercontent.com"),onSuccess:n,onFailure:n,render:function(e){return Object(N.jsx)(g.a,{onClick:e.onClick,disabled:e.disabled,variant:"contained",sx:{background:"#fff",color:"#000",opacity:.54},children:"Login with Google"})},cookiePolicy:"single_host_origin"})})},q=n(221),H=n.n(q),_=function(e){var t=e.informParent;return Object(N.jsx)("div",{style:{marginTop:"10px"},children:Object(N.jsx)(H.a,{appId:"".concat("1544262989247731"),autoLoad:!1,callback:function(e){console.log(e),F()({method:"POST",url:"".concat("/api","/facebook-login"),data:{userID:e.userID,accessToken:e.accessToken}}).then((function(e){console.log("FACEBOOK SIGNIN SUCCESS",e),t(e)})).catch((function(e){console.log("FACEBOOK SIGNIN ERROR",e.response)}))},render:function(e){return Object(N.jsx)(g.a,{onClick:e.onClick,variant:"contained",sx:{background:"#3b5998",color:"#fff"},children:"Login with Facebook"})}})})},K=function(e){var t=e.history,n=Object(a.useState)({email:"",password:"",buttonText:"Submit"}),c=Object(m.a)(n,2),o=c[0],r=c[1],s=o.email,i=o.password,l=o.buttonText,u=function(e){return function(t){r(Object(f.a)(Object(f.a)({},o),{},Object(L.a)({},e,t.target.value)))}},j=function(e){R(e,(function(){t.push("/")}))},O=function(e){e.preventDefault(),r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submitting"})),F()({method:"POST",url:"".concat("/api","/signin"),data:{email:s,password:i}}).then((function(e){console.log("Signin success",e),R(e,(function(){r(Object(f.a)(Object(f.a)({},o),{},{email:"",password:"",buttonText:"Submitted"})),t.push("/")}))})).catch((function(e){console.log("Signin error",e.response.data),r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submit"})),G.b.error(e.response.data.error)}))};return Object(N.jsx)(A,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)(G.a,{}),y()?Object(N.jsx)(b.a,{to:"/"}):null,Object(N.jsx)("h1",{children:"Sign In"}),Object(N.jsx)(J,{informParent:j}),Object(N.jsx)(_,{informParent:j}),Object(N.jsxs)("form",{style:{marginTop:"15px"},children:[Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:u("email"),type:"email",value:s,label:"E-mail",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:u("password"),type:"password",value:i,label:"Password",variant:"standard"})}),Object(N.jsxs)("div",{children:[Object(N.jsx)(g.a,{onClick:O,variant:"contained",sx:{marginTop:"20px"},children:l}),Object(N.jsx)(g.a,{variant:"text",component:d.b,to:"/auth/password/forgot",sx:{marginTop:"20px",marginLeft:"10px"},children:"Forgot Password"})]})]})]})})},M=n(98),Q=n.n(M),X=function(){var e=Object(a.useState)({name:"",token:""}),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(b.g)();Object(a.useEffect)((function(){var e=o.token,t=Q.a.decode(e).name;console.log("name",t),e&&c(Object(f.a)(Object(f.a)({},n),{},{name:t,token:e}))}),[]);var r=n.name,s=n.token,i=function(e){e.preventDefault(),F()({method:"POST",url:"".concat("/api","/account-activation"),data:{token:s}}).then((function(e){console.log("Account activation success",e),G.b.success(e.data.message)})).catch((function(e){console.log("Account activation error",e.response.data.error),G.b.error(e.response.data.error)}))};return Object(N.jsx)(A,{children:Object(N.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(N.jsx)(G.a,{}),Object(N.jsxs)("div",{className:"text-center",children:[Object(N.jsxs)("h1",{className:"p-5",children:["Hi ",r,", ready to activate your account?"]}),Object(N.jsx)("button",{className:"btn btn-outline-primary",onClick:i,children:"Activate Account"})]})]})})},Y=(n(89),function(e){var t=e.history,n=Object(a.useState)({role:"",name:"",email:"",password:"",buttonText:"Submit"}),c=Object(m.a)(n,2),o=c[0],r=c[1],s=P("token");Object(a.useEffect)((function(){F()({method:"GET",url:"".concat("/api","/user/").concat(y()._id),headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){console.log("PRIVATE PROFILE UPDATE",e);var t=e.data,n=t.role,a=t.name,c=t.email;r(Object(f.a)(Object(f.a)({},o),{},{role:n,name:a,email:c}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),401===e.response.status&&k((function(){t.push("/")}))}))}),[]);var i=o.name,l=o.email,u=o.password,j=o.buttonText,d=function(e){return function(t){r(Object(f.a)(Object(f.a)({},o),{},Object(L.a)({},e,t.currentTarget.value)))}},b=function(e){e.preventDefault(),r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submitting"})),F()({method:"PUT",url:"".concat("/api","/user/update"),headers:{Authorization:"Bearer ".concat(s)},data:{name:i,password:u}}).then((function(e){console.log("PRIVATE PROFILE UPDATE SUCCESS",e),C(e,(function(){r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submitted"})),G.b.success("Profile updated successfully")}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submit"})),G.b.error(e.response.data.error)}))};return Object(N.jsx)(A,{children:Object(N.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(N.jsx)(G.a,{}),Object(N.jsx)("h1",{className:"pt-5 text-center",children:"Private"}),Object(N.jsx)("p",{className:"lead text-center",children:"Profile update"}),Object(N.jsxs)("form",{children:[Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:d("name"),type:"text",value:i,label:"Name",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:d("email"),type:"email",value:l,label:"E-mail",variant:"standard",disabled:!0})}),Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:d("password"),type:"password",value:u,label:"Password",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{onClick:b,variant:"contained",sx:{marginTop:"20px"},children:j})})]})]})})}),Z=function(e){var t=e.history,n=Object(a.useState)({role:"",name:"",email:"",password:"",buttonText:"Submit"}),c=Object(m.a)(n,2),o=c[0],r=c[1],s=P("token");Object(a.useEffect)((function(){F()({method:"GET",url:"".concat("/api","/user/").concat(y()._id),headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){console.log("PRIVATE PROFILE UPDATE",e);var t=e.data,n=t.role,a=t.name,c=t.email;r(Object(f.a)(Object(f.a)({},o),{},{role:n,name:a,email:c}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),401===e.response.status&&k((function(){t.push("/")}))}))}),[]);var i=o.role,l=o.name,u=o.email,j=o.password,d=o.buttonText,b=function(e){return function(t){r(Object(f.a)(Object(f.a)({},o),{},Object(L.a)({},e,t.currentTarget.value)))}},O=function(e){e.preventDefault(),r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submitting"})),F()({method:"PUT",url:"".concat("/api","/admin/update"),headers:{Authorization:"Bearer ".concat(s)},data:{name:l,password:j}}).then((function(e){console.log("PRIVATE PROFILE UPDATE SUCCESS",e),C(e,(function(){r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submitted"})),G.b.success("Profile updated successfully")}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),r(Object(f.a)(Object(f.a)({},o),{},{buttonText:"Submit"})),G.b.error(e.response.data.error)}))};return Object(N.jsx)(A,{children:Object(N.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(N.jsx)(G.a,{}),Object(N.jsx)("h1",{className:"pt-5 text-center",children:"Admin"}),Object(N.jsx)("p",{className:"lead text-center",children:"Profile update"}),Object(N.jsxs)("form",{children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"text-muted",children:"Role"}),Object(N.jsx)("input",{defaultValue:i,type:"text",className:"form-control",disabled:!0})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"text-muted",children:"Name"}),Object(N.jsx)("input",{onChange:b("name"),value:l,type:"text",className:"form-control"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"text-muted",children:"Email"}),Object(N.jsx)("input",{defaultValue:u,type:"email",className:"form-control",disabled:!0})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"text-muted",children:"Password"}),Object(N.jsx)("input",{onChange:b("password"),value:j,type:"password",className:"form-control"})]}),Object(N.jsx)("div",{children:Object(N.jsx)("button",{className:"btn btn-primary",onClick:O,children:d})})]})]})})},$=n(99),ee=["children"],te=function(e){var t=e.children,n=Object($.a)(e,ee);return Object(N.jsx)(b.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return y()?t:Object(N.jsx)(b.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},ne=["children"],ae=function(e){var t=e.children,n=Object($.a)(e,ne);return Object(N.jsx)(b.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return y()&&"admin"===y().role?t:Object(N.jsx)(b.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},ce=function(e){e.history;var t=Object(a.useState)({email:"",buttonText:"Request password reset link"}),n=Object(m.a)(t,2),c=n[0],o=n[1],r=c.email,s=c.buttonText,i=function(e){e.preventDefault(),o(Object(f.a)(Object(f.a)({},c),{},{buttonText:"Submitting"})),F()({method:"PUT",url:"".concat("/api","/forgot-password"),data:{email:r}}).then((function(e){console.log("FORGOT PASSWORD SUCCESS",e),G.b.success(e.data.message),o(Object(f.a)(Object(f.a)({},c),{},{buttonText:"Requested"}))})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e.response.data),G.b.error(e.response.data.error),o(Object(f.a)(Object(f.a)({},c),{},{buttonText:"Request password reset link"}))}))};return Object(N.jsx)(A,{children:Object(N.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(N.jsx)(G.a,{}),Object(N.jsx)("h1",{children:"Forgot password"}),function(){return Object(N.jsxs)("form",{children:[Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:(e="email",function(t){o(Object(f.a)(Object(f.a)({},c),{},Object(L.a)({},e,t.currentTarget.value)))}),type:"email",value:r,label:"E-mail",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{onClick:i,variant:"contained",sx:{marginTop:"20px"},children:s})})]});var e}()]})})},oe=function(){var e=Object(a.useState)({name:"",token:"",newPassword:"",buttonText:"Reset password"}),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(b.g)();Object(a.useEffect)((function(){var e=o.token,t=Q.a.decode(e).name;e&&c(Object(f.a)(Object(f.a)({},n),{},{name:t,token:e}))}),[]);var r=n.name,s=n.token,i=n.newPassword,l=n.buttonText,u=function(e){c(Object(f.a)(Object(f.a)({},n),{},{newPassword:e.currentTarget.value}))},j=function(e){e.preventDefault(),c(Object(f.a)(Object(f.a)({},n),{},{buttonText:"Submitting"})),F()({method:"PUT",url:"".concat("/api","/reset-password"),data:{newPassword:i,resetPasswordLink:s}}).then((function(e){console.log("RESET PASSWORD SUCCESS",e),G.b.success(e.data.message),c(Object(f.a)(Object(f.a)({},n),{},{buttonText:"Done"}))})).catch((function(e){console.log("RESET PASSWORD ERROR",e.response.data),G.b.error(e.response.data.error),c(Object(f.a)(Object(f.a)({},n),{},{buttonText:"Reset password"}))}))};return Object(N.jsx)(A,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)(G.a,{}),Object(N.jsxs)("h1",{children:["Hey ",r,", Type your new password"]}),Object(N.jsxs)("form",{children:[Object(N.jsx)("div",{children:Object(N.jsx)(V.a,{onChange:u,type:"password",value:i,label:"New Password",variant:"standard"})}),Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{onClick:j,variant:"contained",sx:{marginTop:"20px"},children:l})})]})]})})},re=function(){return Object(N.jsx)(d.a,{children:Object(N.jsxs)(b.d,{children:[Object(N.jsx)(b.b,{path:"/",exact:!0,component:D}),Object(N.jsx)(b.b,{path:"/signup",component:B}),Object(N.jsx)(b.b,{path:"/signin",component:K}),Object(N.jsx)(b.b,{path:"/auth/activate/:token",component:X}),Object(N.jsx)(te,{path:"/my-account",component:Y}),Object(N.jsx)(ae,{path:"/admin",component:Z}),Object(N.jsx)(b.b,{path:"/auth/password/forgot",exact:!0,component:ce}),Object(N.jsx)(b.b,{path:"/auth/password/reset/:token",exact:!0,component:oe})]})})},se=n(423);r.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsxs)(s.a,{theme:j,children:[Object(N.jsx)(se.a,{}),Object(N.jsx)(re,{})]})}),document.getElementById("root"))}},[[384,1,2]]]);
//# sourceMappingURL=main.b65ef9fe.chunk.js.map